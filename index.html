<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>ìœ¤ì„±ì´ê°€ ì¢‹ì•„í•˜ëŠ” ë‹¨ì–´ í…ŒìŠ¤íŠ¸!</title>
<style>
  :root{
    --bg:#faf9ff; --card:#ffffff; --ink:#1f2937; --muted:#6b7280; --brand:#6d28d9;
    --brand2:#9333ea; --ok:#16a34a; --bad:#ef4444; --ring:rgba(109,40,217,.25);
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font-family: ui-rounded, system-ui, -apple-system, "Segoe UI", Roboto, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;}
  .wrap{max-width:920px;margin:0 auto;padding:16px;display:grid;gap:12px}
  header{display:flex;align-items:center;justify-content:space-between;gap:8px}
  h1{font-size: clamp(20px, 4vw, 28px);margin:0;font-weight:800;letter-spacing:-0.3px;background:linear-gradient(90deg,var(--brand),var(--brand2));-webkit-background-clip:text;color:transparent}
  .card{background:var(--card);border-radius:18px;box-shadow:0 8px 24px rgba(0,0,0,.06);padding:14px}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:8px}
  .row > *{min-width:0}
  select, button, input[type="text"]{
    width:100%;padding:14px 13px;border-radius:14px;border:1px solid #e7e7ef;background:white;font-size:16px;
    outline:none;transition:.15s;box-shadow:0 0 0 0 var(--ring);
  }
  select:focus, input:focus{border-color:var(--brand);box-shadow:0 0 0 6px var(--ring)}
  button{background:linear-gradient(180deg,#7c3aed,#6d28d9);color:#fff;border:none;font-weight:700}
  button.ghost{background:#fff;color:var(--brand);border:1px solid #e6e0fb}
  button.alt{background:#111827}
  button:disabled{opacity:.6}
  .controls{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
  .controls3{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
  .qarea{display:grid;gap:10px;text-align:center}
  .tag{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:999px;background:#f1e9ff;color:#5b21b6;font-weight:700;font-size:12px}
  .q{font-size: clamp(20px,5.6vw,34px);font-weight:800;letter-spacing:-.3px;line-height:1.2;margin:6px 0}
  .sub{font-size:14px;color:var(--muted)}
  .choices{display:grid;grid-template-columns:1fr;gap:8px}
  .choice{padding:14px;border:1px solid #ebe9f7;border-radius:14px;background:#fff;text-align:left}
  .choice.correct{border-color:rgba(22,163,74,.4);background:#ecfdf5}
  .choice.wrong{border-color:rgba(239,68,68,.4);background:#fef2f2}
  .answerbox{display:flex;gap:8px}
  .answerbox input{flex:1}
  .stat{display:flex;gap:10px;flex-wrap:wrap;align-items:center;font-size:13px;color:var(--muted)}
  .pill{background:#f4f4f8;border:1px solid #ececf5;border-radius:999px;padding:6px 10px}
  .score{font-weight:800;color:#111827}
  .footer{display:flex;gap:8px;flex-wrap:wrap;justify-content:space-between;align-items:center;margin-top:6px}
  .sm{font-size:12px;color:var(--muted)}
  .bigbtn{padding:16px;font-size:18px;border-radius:16px}
  .grid2{display:grid;grid-template-columns:1fr 1fr;gap:8px}
  .hidden{display:none !important}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>ìœ¤ì„±ì´ê°€ ì¢‹ì•„í•˜ëŠ” ë‹¨ì–´ í…ŒìŠ¤íŠ¸!</h1>
    <button class="ghost" id="btnReset">ì§„í–‰ë¥  ì´ˆê¸°í™”</button>
  </header>

  <section class="card">
    <div class="row">
      <div>
        <label class="sm">ë‚ ì§œ ì„ íƒ</label>
        <select id="daySelect"></select>
      </div>
      <div>
        <label class="sm">ëª¨ë“œ</label>
        <select id="modeSelect">
          <option value="eng2kor">ì˜â†’í•œ (ëœ» ë§íˆê¸°)</option>
          <option value="kor2eng">í•œâ†’ì˜ (ìŠ¤í  ì“°ê¸°)</option>
        </select>
      </div>
    </div>
    <div class="grid2" style="margin-top:8px">
      <div>
        <label class="sm">ì¶œì œ ë°©ì‹</label>
        <select id="styleSelect">
          <option value="mc">ê°ê´€ì‹(ì„ íƒ)</option>
          <option value="input">ì£¼ê´€ì‹(ì§ì ‘ ì…ë ¥)</option>
        </select>
      </div>
      <div>
        <label class="sm">í•™ìŠµ ë²”ìœ„</label>
        <select id="poolSelect">
          <option value="all">ì „ì²´</option>
          <option value="wrong">ì˜¤ë‹µë§Œ</option>
          <option value="new">ë¯¸í•™ìŠµ</option>
        </select>
      </div>
    </div>
    <div class="controls" style="margin-top:8px">
      <button id="btnStart" class="bigbtn">ì‹œì‘í•˜ê¸°</button>
      <button id="btnSpeak" class="ghost bigbtn">ë°œìŒ ë“£ê¸° ğŸ”Š</button>
    </div>
  </section>

  <section class="card qarea hidden" id="quizArea">
    <div class="tag" id="tagInfo">Day ? â€¢ ë¬¸ì œ ?/?</div>
    <div class="q" id="question">ë¬¸ì œ ì˜ì—­</div>
    <div class="sub" id="hint"></div>

    <div id="mcArea" class="choices"></div>

    <div id="inputArea" class="answerbox hidden">
      <input id="answerInput" type="text" inputmode="latin" autocomplete="off" placeholder="ì—¬ê¸°ì— ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" />
      <button id="btnCheck">í™•ì¸</button>
    </div>

    <div class="footer">
      <div class="stat">
        <span class="pill">ì •ë‹µ: <b class="score" id="correctCnt">0</b></span>
        <span class="pill">ì˜¤ë‹µ: <b class="score" id="wrongCnt">0</b></span>
        <span class="pill">ì—°ì†ì •ë‹µ: <b class="score" id="streak">0</b></span>
      </div>
      <div class="controls3">
        <button id="btnSkip" class="ghost">ê±´ë„ˆë›°ê¸°</button>
        <button id="btnAgain" class="ghost">ì˜¤ë‹µë…¸íŠ¸</button>
        <button id="btnNext" class="">ë‹¤ìŒ â–¶</button>
      </div>
    </div>
  </section>

  <section class="card">
    <div class="sm">
      â€¢ **ì˜â†’í•œ** ëª¨ë“œì—ì„œëŠ” ì˜ì–´ ë°œìŒì„ ë“¤ì„ ìˆ˜ ìˆì–´ìš”.  
      â€¢ **í•œâ†’ì˜** ëª¨ë“œì—ì„œëŠ” ì² ìê¹Œì§€ ì •í™•íˆ ì¨ì•¼ í•©ë‹ˆë‹¤(ëŒ€ì†Œë¬¸ì ë¬´ì‹œ, ì‰¼í‘œÂ·ê´„í˜¸ëŠ” ë¬´ì‹œ).  
      â€¢ ì˜¤ë‹µì€ ìë™ ì €ì¥ë˜ì–´ â€œì˜¤ë‹µë§Œâ€ìœ¼ë¡œ ë³µìŠµí•  ìˆ˜ ìˆì–´ìš”.
    </div>
  </section>
</div>

<script>
/** -----------------------------
 *  1) ë‚ ì§œë³„ ë‹¨ì–´ ë°ì´í„°
 *  key: "Day 7 (8/12)" í˜•ì‹
 *  eng: ì˜ì–´ í‘œê¸°, kor: í•œêµ­ì–´ ì˜ë¯¸(ì—¬ëŸ¬ ëœ»ì€ ì½¤ë§ˆë¡œ êµ¬ë¶„)
 *--------------------------------*/
const WORDS = {
"Day 7 (8/12)":[
  {eng:"light a flame", kor:"ë¶ˆì„ ì§€í”¼ë‹¤"},
  {eng:"arson", kor:"ë°©í™”"},
  {eng:"on purpose", kor:"ê³ ì˜ë¡œ, ì¼ë¶€ëŸ¬"},
  {eng:"heatwave", kor:"ì—´ê¸°, ì—´ì„ "},
  {eng:"destroy", kor:"íŒŒê´´í•˜ë‹¤"},
  {eng:"history", kor:"ì—­ì‚¬"},
  {eng:"eastern", kor:"ë™ìª½ì— ìœ„ì¹˜í•œ"},
  {eng:"reach", kor:"~ì— ì´ë¥´ë‹¤, ë‹¿ë‹¤"},
  {eng:"luckily", kor:"ë‹¤í–‰ìŠ¤ëŸ½ê²Œë„"},
  {eng:"accident", kor:"ì‚¬ê³ , ì¬í•´"},
  {eng:"cigarette", kor:"ë‹´ë°°"},
  {eng:"car crash", kor:"ìë™ì°¨ ì¶©ëŒì‚¬ê³ "},
  {eng:"knock down", kor:"ë•Œë ¤ ë¶€ìˆ˜ë‹¤"},
  {eng:"electrical line", kor:"ì „ì„ "},
  {eng:"spark", kor:"ë¶ˆê½ƒ, ë¶ˆë˜¥, ë¶ˆê½ƒì„ ì¼ìœ¼í‚¤ë‹¤"},
],
"Day 8 (8/13)":[
  {eng:"controlled burn", kor:"í†µì œëœ ì—°ì†Œ"},
  {eng:"satellite", kor:"(ì¸ê³µ) ìœ„ì„±, ìœ„ì„±(ì¥ì¹˜)"},
  {eng:"put out fires", kor:"ë¶ˆì„ ë„ë‹¤"},
  {eng:"chemical", kor:"í™”í•™ì˜"},
  {eng:"equipment", kor:"ì¥ë¹„"},
  {eng:"tower", kor:"íƒ‘, ì†¡ì‹ íƒ‘"},
  {eng:"look for", kor:"~ì„ ì°¾ë‹¤"},
  {eng:"call for", kor:"~ì„ í•„ìš”ë¡œ í•˜ë‹¤"},
  {eng:"match", kor:"ì„±ëƒ¥"},
  {eng:"effect", kor:"ì˜í–¥, ê²°ê³¼, íš¨ê³¼"},
  {eng:"cost", kor:"ë¹„ìš©, ë¹„ìš©ì´ ë“¤ë‹¤"},
  {eng:"breathe", kor:"í˜¸í¡í•˜ë‹¤, ìˆ¨ì„ ì‰¬ë‹¤"},
  {eng:"look after", kor:"~ì„ ë³´ì‚´í”¼ë‹¤, ~ì— ì£¼ì˜í•˜ë‹¤"},
  {eng:"expert", kor:"ì „ë¬¸ê°€"},
  {eng:"prevent", kor:"ë§‰ë‹¤, ì˜ˆë°©í•˜ë‹¤"},
],
"Day 9 (8/14)":[
  {eng:"lighter", kor:"(ë‹´ë°°) ë¼ì´í„°"},
  {eng:"fire extinguisher", kor:"ì†Œí™”ê¸°"},
  {eng:"emergency", kor:"ë¹„ìƒ(ì‚¬íƒœ)"},
  {eng:"evacuate", kor:"ëŒ€í”¼ì‹œí‚¤ë‹¤"},
  {eng:"order", kor:"ëª…ë ¹"},
  {eng:"ash", kor:"ì¬, ì¿ë”ë¯¸"},
  {eng:"jewelry", kor:"ë³´ì„ë¥˜"},
  {eng:"envelope", kor:"ë´‰íˆ¬"},
  {eng:"tore", kor:"(tearì˜ ê³¼ê±°) ì°¢ì—ˆë‹¤"},
  {eng:"invitation", kor:"ì´ˆëŒ€(ì´ˆì²­)ì¥"},
  {eng:"a grand ball", kor:"ì„±ëŒ€í•œ ë¬´ë„íšŒ"},
  {eng:"palace", kor:"ê¶ì „, ì™•ì‹¤"},
  {eng:"instead of", kor:"~ëŒ€ì‹ ì—"},
  {eng:"opportunity", kor:"ê¸°íšŒ"},
  {eng:"irritated", kor:"ì§œì¦ì´ ë‚œ, í™”ë‚œ"},
],
"Day 10 (8/18)":[
  {eng:"glance", kor:"í˜ê¹ƒë³´ë‹¤, í˜ê¹ƒ ë´„"},
  {eng:"impatiently", kor:"ì¡°ë§ˆì¡°ë§ˆí•˜ê²Œ, ì¡°ê¸‰í•˜ê²Œ"},
  {eng:"stammer", kor:"ë§ì„ ë”ë“¬ë‹¤, ë§ë”ë“¬ê¸°"},
  {eng:"calm", kor:"ì¹¨ì°©í•œ, ì°¨ë¶„í•œ"},
  {eng:"voice", kor:"ëª©ì†Œë¦¬"},
  {eng:"franc", kor:"í”„ë‘ (í™”íë‹¨ìœ„)"},
  {eng:"grow pale", kor:"íŒŒë—ê²Œ ì§ˆë¦¬ë‹¤"},
  {eng:"savings", kor:"ì €ì¶•"},
  {eng:"anxious", kor:"ë¶ˆì•ˆí•´í•˜ëŠ”"},
  {eng:"annoy", kor:"ì§œì¦ë‚˜ê²Œí•˜ë‹¤"},
  {eng:"stylish", kor:"ìœ í–‰ì„ ë”°ë¥´ëŠ”, ë©‹ì§„, ìš°ì•„í•œ"},
  {eng:"humiliating", kor:"êµ´ìš•ìŠ¤ëŸ¬ìš´"},
  {eng:"lend", kor:"ë¹Œë ¤ì£¼ë‹¤"},
  {eng:"wardrobe", kor:"ì˜·ì¥"},
  {eng:"Certainly", kor:"ê·¸ëŸ¼ìš”, ë¬¼ë¡ ì´ì§€ìš”"},
],
"Day 11 (8/19)":[
  {eng:"present", kor:"ì°¸ì„í•œ"},
  {eng:"feel a sense of joy", kor:"í¬ì—´ê°ì„ ëŠë¼ë‹¤"},
  {eng:"elegant", kor:"ìš°ì•„í•œ, í’ˆê²©ìˆëŠ”"},
  {eng:"midnight", kor:"ìì •, í•œë°¤ì¤‘"},
  {eng:"contrast", kor:"ëŒ€ì¡°í•˜ë‹¤, ëŒ€ì¡°"},
  {eng:"catch a cold", kor:"ê°ê¸° ë“¤ë‹¤"},
  {eng:"cab", kor:"íƒì‹œ"},
  {eng:"despair", kor:"ì ˆë§, ì ˆë§í•˜ë‹¤"},
  {eng:"whole", kor:"ì „ì²´ì˜"},
  {eng:"route", kor:"ê¸¸, ë…¸ì„ "},
  {eng:"completely", kor:"ì™„ì „íˆ"},
  {eng:"overwhelmed", kor:"ì••ë„ëœ"},
  {eng:"reward", kor:"ë³´ìƒ, ë³´ìƒí•˜ë‹¤"},
  {eng:"fear", kor:"ë‘ë ¤ì›€, ê³µí¬"},
  {eng:"hollow", kor:"(ì†ì´) ë¹ˆ"},
],
"Day 12 (8/20)":[
  {eng:"clasp", kor:"(ê½‰) ì›€ì¼œì¥ë‹¤, (ê½‰) ê»´ì•ˆë‹¤"},
  {eng:"mend", kor:"ìˆ˜ë¦¬í•˜ë‹¤, ê³ ì¹˜ë‹¤"},
  {eng:"make a plan", kor:"ê³„íšì„ ì§œë‹¤"},
  {eng:"lose hope", kor:"í¬ë§ì„ ìƒë‹¤"},
  {eng:"possess", kor:"ì†Œìœ í•˜ë‹¤, ì§€ë‹ˆë‹¤"},
  {eng:"borrow", kor:"ë¹Œë¦¬ë‹¤"},
  {eng:"collect", kor:"ëª¨ìœ¼ë‹¤"},
  {eng:"frightened", kor:"ê²ë¨¹ì€, ë¬´ì„œì›Œí•˜ëŠ”"},
  {eng:"whenever", kor:"~í•  ë•ŒëŠ” ì–¸ì œë“ ì§€, ~í•  ë•Œë§ˆë‹¤"},
  {eng:"from then on", kor:"ê·¸ë•Œë¶€í„°"},
  {eng:"detect", kor:"ë°œê²¬í•˜ë‹¤, ê°ì§€í•˜ë‹¤"},
  {eng:"substitution", kor:"ëŒ€ì²´"},
  {eng:"thief", kor:"ë„ë‘‘"},
  {eng:"tough", kor:"í˜ë“ , ì–´ë ¤ìš´"},
  {eng:"complain", kor:"ë¶ˆí‰í•˜ë‹¤"},
],
"Day 13 (8/21)":[
  {eng:"accept", kor:"ë°›ì•„ë“¤ì´ë‹¤"},
  {eng:"dreadful", kor:"ë”ì°í•œ, ì§€ë…í•œ"},
  {eng:"debt", kor:"ë¹š, ë¶€ì±„"},
  {eng:"dainty", kor:"ì•™ì¦ë§ì€, ì¡°ì‹¬ìŠ¤ëŸ¬ìš´"},
  {eng:"bargain", kor:"ì‹¸ê²Œ ì‚¬ëŠ” ë¬¼ê±´, í˜‘ì˜, í¥ì •"},
  {eng:"absolutely", kor:"í‹€ë¦¼ì—†ì´"},
  {eng:"interest", kor:"ì´ì"},
  {eng:"admire", kor:"ì¡´ê²½í•˜ë‹¤, ì¹­ì°¬í•˜ë‹¤"},
  {eng:"strange", kor:"ì´ìƒí•œ, ë‚¯ì„ "},
  {eng:"refresh", kor:"ìƒê¸°ë¥¼ ë˜ì°¾ê²Œí•˜ë‹¤"},
  {eng:"charming", kor:"ë§¤ë ¥ì ì¸, ë©‹ì§„"},
  {eng:"astonish", kor:"ê¹œì§ ë†€ë¼ê²Œ í•˜ë‹¤"},
  {eng:"greet", kor:"í™˜ì˜í•˜ë‹¤"},
  {eng:"utter", kor:"(ë§ì„) í•˜ë‹¤"},
  {eng:"poverty", kor:"ê°€ë‚œ"},
],
"Day 14 (8/25)":[
  {eng:"outbreak", kor:"ë°œìƒ, ë°œë°œ"},
  {eng:"pandemic", kor:"ì „êµ­(ì „ ì„¸ê³„ì ì¸) ìœ í–‰ë³‘"},
  {eng:"be ill", kor:"ëª¸ì´ í¸ì¹˜ ì•Šë‹¤"},
  {eng:"at the same time", kor:"ê·¸ì™€ ë™ì‹œì—"},
  {eng:"illness", kor:"ë³‘, ì•„í””"},
  {eng:"from person to person", kor:"ì‚¬ëŒì—ì„œ ì‚¬ëŒìœ¼ë¡œ"},
  {eng:"serious", kor:"ì‹¬ê°í•œ"},
  {eng:"break out", kor:"ë°œìƒí•˜ë‹¤, ë°œë°œí•˜ë‹¤"},
  {eng:"affect", kor:"ì˜í–¥ì„ ë¯¸ì¹˜ë‹¤"},
  {eng:"tiny", kor:"ì•„ì£¼ ì‘ì€"},
  {eng:"organism", kor:"ìœ ê¸°ì²´, (ê·¹ë„ë¡œ ì‘ì€) ìƒë¬¼ì²´"},
  {eng:"microscope", kor:"í˜„ë¯¸ê²½"},
  {eng:"bacteria", kor:"ë°•í…Œë¦¬ì•„, ì„¸ê· "},
  {eng:"are made of", kor:"~ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ë‹¤"},
  {eng:"cell", kor:"ì„¸í¬"},
],
"Day 15 (8/26)":[
  {eng:"digest", kor:"ì†Œí™”í•˜ë‹¤"},
  {eng:"infection", kor:"ê°ì—¼"},
  {eng:"enter", kor:"ë“¤ì–´ê°€ë‹¤"},
  {eng:"stick to", kor:"~ì— ë‹¬ë¼ë¶™ë‹¤, ê³ ìˆ˜í•˜ë‹¤"},
  {eng:"copy", kor:"ë³µì‚¬, ë³µì‚¬í•˜ë‹¤"},
  {eng:"virus", kor:"ë°”ì´ëŸ¬ìŠ¤"},
  {eng:"common", kor:"í”í•œ"},
  {eng:"the flu", kor:"ë…ê°"},
  {eng:"human", kor:"ì¸ê°„"},
  {eng:"dangerous", kor:"ìœ„í—˜í•œ"},
  {eng:"develop", kor:"ì„±ì¥í•˜ë‹¤, ë°œì „í•˜ë‹¤"},
  {eng:"Europe", kor:"ìœ ëŸ½"},
  {eng:"everywhere", kor:"ëª¨ë“  ê³³, ì–´ë””ë‚˜"},
  {eng:"Plague", kor:"ì „ì—¼ë³‘"},
  {eng:"European", kor:"ìœ ëŸ½ì˜"},
],
"Day 16 (8/27)":[
  {eng:"continue", kor:"ê³„ì†í•˜ë‹¤"},
  {eng:"flea", kor:"ë²¼ë£©"},
  {eng:"rat", kor:"ì¥"},
  {eng:"carry", kor:"(ë³‘ì„) ì˜®ê¸°ë‹¤"},
  {eng:"was filled with", kor:"~ìœ¼ë¡œ ê°€ë“ì°¼ë‹¤"},
  {eng:"herb", kor:"í—ˆë¸Œ, ì•½ì´ˆ"},
  {eng:"ability", kor:"ëŠ¥ë ¥"},
  {eng:"infectious", kor:"ì „ì—¼ë˜ëŠ”"},
  {eng:"sneezing", kor:"ì¬ì±„ê¸°"},
  {eng:"door handle", kor:"ì†ì¡ì´"},
  {eng:"type", kor:"ìœ í˜•"},
  {eng:"cough", kor:"ê¸°ì¹¨í•˜ë‹¤, ê¸°ì¹¨"},
  {eng:"anymore", kor:"ë”ì´ìƒ"},
  {eng:"create", kor:"ì°½ì¡°í•˜ë‹¤"},
  {eng:"vaccine", kor:"ë°±ì‹ "},
],
"Day 17 (8/28)":[
  {eng:"medicine", kor:"ì•½, ì˜ì•½"},
  {eng:"less", kor:"ëœ"},
  {eng:"healthy", kor:"ê±´ê°•í•œ"},
  {eng:"exercise", kor:"ìš´ë™í•˜ë‹¤"},
  {eng:"simple", kor:"ê°„ë‹¨í•œ, ë‹¨ìˆœí•œ"},
  {eng:"step", kor:"ë‹¨ê³„"},
  {eng:"protect", kor:"ë³´í˜¸í•˜ë‹¤"},
  {eng:"cover", kor:"ë®ë‹¤, ê°€ë¦¬ë‹¤"},
  {eng:"keep a distance", kor:"ê±°ë¦¬ë¥¼ ìœ ì§€í•˜ë‹¤"},
  {eng:"follow", kor:"ë”°ë¥´ë‹¤"},
  {eng:"direction", kor:"ì§€ì‹œ"},
  {eng:"make sure", kor:"í™•ì‹¤í•˜ê²Œ í•˜ë‹¤"},
  {eng:"on average", kor:"í‰ê· ì ìœ¼ë¡œ"},
  {eng:"on stage", kor:"ë¬´ëŒ€ì—ì„œ"},
  {eng:"stream", kor:"ìŠ¤íŠ¸ë¦¬ë°í•˜ë‹¤"},
],
"Day 18 (8/29)":[
  {eng:"dance to music", kor:"ìŒì•…ì— ë§ì¶° ì¶¤ì¶”ë‹¤"},
  {eng:"attend", kor:"ì°¸ì„í•˜ë‹¤"},
  {eng:"write lyrics", kor:"ê°€ì‚¬ë¥¼ ì“°ë‹¤"},
  {eng:"held", kor:"(ì¶•ì œë¥¼) ì—´ì—ˆë‹¤"},
  {eng:"music competition", kor:"ìŒì•…ê²½ì—°ëŒ€íšŒ"},
  {eng:"fantastic", kor:"ì—„ì²­ë‚œ, êµ‰ì¥í•œ"},
  {eng:"senior", kor:"ë‚˜ì´ ë“  ì‚¬ëŒ, ë…¸ì¸"},
  {eng:"unity", kor:"í†µí•©, ì¼ì¹˜"},
  {eng:"convince", kor:"ë‚©ë“ì‹œí‚¤ë‹¤"},
  {eng:"nothing", kor:"ì•„ë¬´ê²ƒë„ (ì•„ë‹ˆë‹¤)"},
  {eng:"beat", kor:"ì´ê¸°ë‹¤"},
  {eng:"get a chance", kor:"ê¸°íšŒë¥¼ ì–»ë‹¤"},
  {eng:"regret", kor:"í›„íšŒí•˜ë‹¤"},
  {eng:"hit a home run", kor:"í™ˆëŸ°ì„ ì¹˜ë‹¤"},
  {eng:"commit", kor:"ì €ì§€ë¥´ë‹¤, ë²”í•˜ë‹¤"},
],
};

/** ------------ ìƒíƒœ/ìœ í‹¸ -------------- */
const $ = sel => document.querySelector(sel);
const daySelect = $('#daySelect'), modeSelect = $('#modeSelect'), styleSelect = $('#styleSelect');
const poolSelect = $('#poolSelect');
const quizArea = $('#quizArea'), tagInfo = $('#tagInfo'), q = $('#question'), hint = $('#hint');
const mcArea = $('#mcArea'), inputArea = $('#inputArea'), answerInput = $('#answerInput');
const btnCheck = $('#btnCheck'), btnNext = $('#btnNext'), btnSkip = $('#btnSkip'), btnAgain = $('#btnAgain');
const btnStart = $('#btnStart'), btnSpeak = $('#btnSpeak'), btnReset = $('#btnReset');
const correctCnt = $('#correctCnt'), wrongCnt = $('#wrongCnt'), streakEl = $('#streak');

const DAYS = Object.keys(WORDS);
DAYS.forEach(d => {
  const opt = document.createElement('option'); opt.value = d; opt.textContent = d; daySelect.appendChild(opt);
});
daySelect.value = DAYS[0];

let pool = [], idx = 0, correct=0, wrong=0, streak=0, answered=false;
const KEY = "yoon_vocab_progress_v1";

/** ë¡œì»¬ ì§„í–‰ë¥  */
function loadProg(){
  try{ return JSON.parse(localStorage.getItem(KEY) || "{}"); }catch(e){ return {}; }
}
function saveProg(data){ localStorage.setItem(KEY, JSON.stringify(data)); }
function markWrong(day, eng){
  const prog = loadProg(); prog[day]??={done:[], wrong:[]};
  if(!prog[day].wrong.includes(eng)) prog[day].wrong.push(eng);
  saveProg(prog);
}
function markRight(day, eng){
  const prog = loadProg(); prog[day]??={done:[], wrong:[]};
  if(!prog[day].done.includes(eng)) prog[day].done.push(eng);
  prog[day].wrong = prog[day].wrong.filter(x=>x!==eng);
  saveProg(prog);
}

/** ë¬¸ìì—´ ì •ê·œí™”(í•œâ†’ì˜ ì…ë ¥ ì±„ì  ì‹œ ê´„í˜¸/ì‰¼í‘œ/ê³µë°±/ëŒ€ì†Œë¬¸ì ë¬´ì‹œ) */
function norm(s){
  return s.toLowerCase().replace(/[()\,]/g,' ').replace(/\s+/g,' ').trim();
}
/** ì…”í”Œ */
function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]];} return a; }
/** ë³´ê¸° ìƒì„± */
function buildChoices(correctKor, dayList){
  const pool = shuffle(dayList.filter(x=>x.kor!==correctKor)).slice(0,3).map(x=>x.kor);
  pool.push(correctKor); return shuffle(pool);
}

/** ë¬¸ì œ ì‹œì‘ */
btnStart.addEventListener('click', start);
btnReset.addEventListener('click', ()=>{
  if(confirm('ì €ì¥ëœ ì§„í–‰ë¥ ê³¼ ì˜¤ë‹µë…¸íŠ¸ë¥¼ ì´ˆê¸°í™”í• ê¹Œìš”?')){
    localStorage.removeItem(KEY); alert('ì´ˆê¸°í™” ì™„ë£Œ!');
  }
});

function start(){
  const day = daySelect.value;
  const mode = modeSelect.value;
  const style = styleSelect.value;
  const list = WORDS[day].slice();
  const prog = loadProg()[day] || {done:[], wrong:[]};

  if(poolSelect.value==="wrong" && prog.wrong.length){
    pool = list.filter(x=>prog.wrong.includes(x.eng));
  }else if(poolSelect.value==="new" && prog.done.length){
    pool = list.filter(x=>!prog.done.includes(x.eng));
    if(pool.length===0){ alert('ëª¨ë“  ë¬¸ì œë¥¼ í•™ìŠµí–ˆìŠµë‹ˆë‹¤! â€œì „ì²´â€ ë˜ëŠ” â€œì˜¤ë‹µë§Œâ€ì„ ì„ íƒí•´ ë³´ì„¸ìš”.'); return; }
  }else{
    pool = list;
  }

  shuffle(pool);
  idx=0; correct=0; wrong=0; streak=0;
  correctCnt.textContent=0; wrongCnt.textContent=0; streakEl.textContent=0;

  quizArea.classList.remove('hidden');
  updateUI();
  answerInput.value="";
  answerInput.focus();
  window.scrollTo({top:0,behavior:'smooth'});
}

/** ìŒì„± */
btnSpeak.addEventListener('click', ()=>{
  const day = daySelect.value;
  if(!quizArea.classList.contains('hidden')){
    speak(pool[idx].eng);
  }else{
    speak("Yoonsung Vocabulary Test");
  }
});
function speak(text){
  try{
    const u = new SpeechSynthesisUtterance(text);
    u.lang = 'en-US'; u.rate = 0.95;
    speechSynthesis.cancel(); speechSynthesis.speak(u);
  }catch(e){}
}

/** UI ê°±ì‹  */
function updateUI(){
  const day = daySelect.value, mode = modeSelect.value, style = styleSelect.value;
  const item = pool[idx];
  tagInfo.textContent = `${day} â€¢ ë¬¸ì œ ${idx+1}/${pool.length}`;

  if(mode==="eng2kor"){
    q.textContent = item.eng;
    hint.textContent = "í•œêµ­ì–´ ëœ»ì„ ë§í˜€ë³´ì„¸ìš”";
    btnSpeak.disabled=false;
  }else{
    q.textContent = item.kor;
    hint.textContent = "ì˜ì–´ ì² ìë¥¼ ì¨ë³´ì„¸ìš”";
    btnSpeak.disabled=true; // í•œêµ­ì–´ íŒíŠ¸ì—ì„  ë°œìŒ ë¹„í™œì„±
  }

  answered=false;
  mcArea.innerHTML="";
  inputArea.classList.add('hidden');

  if(style==="mc" || mode==="eng2kor"){
    // ê°ê´€ì‹ (í•œê¸€ ë³´ê¸°) â€” í•œâ†’ì˜ ëª¨ë“œë¼ë„ ê¸°ë³¸ì€ ì…ë ¥ì´ ë” ì¢‹ì•„ì„œ, í•œâ†’ì˜ ì„ íƒì€ style=mcì—ì„œë§Œ ì‚¬ìš©
    const dayList = WORDS[day];
    const choices = (mode==="eng2kor")
      ? buildChoices(item.kor, dayList)
      : shuffle([item.eng, ...shuffle(dayList.filter(x=>x.eng!==item.eng)).slice(0,3).map(x=>x.eng)]);
    mcArea.classList.remove('hidden');
    choices.forEach(text=>{
      const b = document.createElement('button');
      b.className="choice";
      b.textContent=text;
      b.addEventListener('click', ()=>grade(text));
      mcArea.appendChild(b);
    });
  }else{
    mcArea.classList.add('hidden');
    inputArea.classList.remove('hidden');
    answerInput.value="";
    answerInput.placeholder = (mode==="kor2eng") ? "ì˜ˆ) fire extinguisher" : "ì˜ˆ) ë¶ˆì„ ì§€í”¼ë‹¤";
    setTimeout(()=>answerInput.focus(),100);
  }
}

/** ì±„ì  */
function grade(user){
  if(answered) return; answered=true;
  const mode = modeSelect.value;
  const day = daySelect.value;
  const item = pool[idx];

  let ok=false, expected="", userShow="";
  if(mode==="eng2kor"){
    expected = item.kor;
    userShow = user ?? answerInput.value;
    ok = norm(userShow)===norm(expected);
  }else{
    expected = item.eng;
    userShow = user ?? answerInput.value;
    ok = norm(userShow)===norm(expected);
  }

  if(user===undefined){
    // ì…ë ¥í˜•ì—ì„œ ë²„íŠ¼ìœ¼ë¡œ ì±„ì  ëˆ„ë¥¸ ê²½ìš°
  }

  if(mcArea.children.length){
    [...mcArea.children].forEach(btn=>{
      const t = btn.textContent;
      if(norm(t)===norm(expected)) btn.classList.add('correct');
      if(user && norm(t)===norm(user) && norm(user)!==norm(expected)) btn.classList.add('wrong');
      btn.disabled=true;
    });
  }

  if(ok){
    correct++; streak++;
    correctCnt.textContent=correct; streakEl.textContent=streak;
    markRight(day, item.eng);
  }else{
    wrong++; streak=0;
    wrongCnt.textContent=wrong; streakEl.textContent=streak;
    markWrong(day, item.eng);
    // ì •ë‹µ ì•ˆë‚´
    const tip = document.createElement('div');
    tip.className="sub";
    tip.style.color="var(--bad)";
    tip.style.fontWeight="700";
    tip.style.marginTop="4px";
    tip.textContent = `ì •ë‹µ: ${expected}  (${item.eng})`;
    document.querySelector('.qarea').appendChild(tip);
    setTimeout(()=>tip.remove(), 2500);
    if(!mcArea.children.length){
      answerInput.select();
    }
  }
}

/** ë²„íŠ¼ ë™ì‘ */
btnCheck.addEventListener('click', ()=>grade());
answerInput.addEventListener('keydown', e=>{
  if(e.key==='Enter'){ grade(); }
});
btnNext.addEventListener('click', ()=>{
  if(idx < pool.length-1){ idx++; updateUI(); }
  else { finish(); }
});
btnSkip.addEventListener('click', ()=>{
  if(idx < pool.length-1){ idx++; updateUI(); }
  else { finish(); }
});
btnAgain.addEventListener('click', ()=>{
  poolSelect.value="wrong"; start();
});

function finish(){
  alert(`ì™„ë£Œ! ì •ë‹µ ${correct}, ì˜¤ë‹µ ${wrong}`);
  quizArea.classList.add('hidden');
}

/** ì²˜ìŒ ë¡œë”© ì‹œ UI ì •ë¦¬ */
styleSelect.addEventListener('change', ()=>{
  // í•œâ†’ì˜ì´ë©´ ê¸°ë³¸ ì£¼ê´€ì‹ ì¶”ì²œ
  if(modeSelect.value==="kor2eng" && styleSelect.value==="mc"){
    // í—ˆìš©í•˜ë˜ ê·¸ëŒ€ë¡œ ë‘ 
  }
});
</script>
</body>
</html>
