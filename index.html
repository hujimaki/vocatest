<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>ìœ¤ì„±ì´ê°€ ì¢‹ì•„í•˜ëŠ” ë‹¨ì–´ í…ŒìŠ¤íŠ¸!</title>
<style>
  :root{
    --bg:#faf9ff; --card:#ffffff; --ink:#111827; --muted:#6b7280;
    --brand:#7c3aed; --ok:#10b981; --bad:#ef4444; --ring:rgba(124,58,237,.3);
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);
    font-family: ui-rounded, system-ui, -apple-system, "Segoe UI", Roboto, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif}
  .container{max-width:800px;margin:0 auto;padding:20px}
  .header{ text-align:center;margin-bottom:30px;padding:20px;
    background:linear-gradient(135deg,var(--brand),#a855f7);border-radius:20px;color:#fff}
  .header h1{margin:0;font-size:28px;font-weight:800;text-shadow:0 2px 4px rgba(0,0,0,.2)}
  .card{background:var(--card);border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,.08);padding:24px;margin-bottom:20px}
  .controls{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px}
  .form-group{margin-bottom:16px}
  .form-group label{display:block;margin-bottom:6px;font-weight:600;color:var(--muted);font-size:14px}
  select,button,input{width:100%;padding:14px 16px;border-radius:12px;border:2px solid #e5e7eb;background:#fff;font-size:16px;transition:.2s}
  select:focus,input:focus{outline:none;border-color:var(--brand);box-shadow:0 0 0 3px var(--ring)}
  button{background:linear-gradient(135deg,var(--brand),#8b5cf6);color:#fff;border:none;font-weight:700;cursor:pointer}
  button.secondary{background:#fff;color:var(--brand);border:2px solid var(--brand)}
  button:disabled{opacity:.6;cursor:not-allowed}
  .quiz-area{display:none;text-align:center}
  .quiz-area.active{display:block}
  .quiz-info{display:inline-block;padding:8px 16px;background:#f3f4f6;border-radius:20px;font-size:14px;font-weight:600;color:var(--muted);margin-bottom:24px}
  .question{font-size:36px;font-weight:800;margin:20px 0;color:#111;line-height:1.2}
  .hint{font-size:16px;color:var(--muted);margin-bottom:30px}
  .answer-section{max-width:420px;margin:0 auto 30px}
  .answer-input{font-size:18px !important;text-align:center;padding:16px 20px !important;margin-bottom:16px}
  .answer-buttons{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .stats{display:flex;justify-content:center;gap:20px;margin-bottom:20px;flex-wrap:wrap}
  .stat{padding:12px 20px;background:#f8fafc;border-radius:12px;text-align:center}
  .stat-label{font-size:12px;color:var(--muted);margin-bottom:4px}
  .stat-value{font-size:18px;font-weight:800;color:var(--brand)}
  .bottom-controls{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
  .result-message{margin:16px 0;padding:12px;border-radius:8px;font-weight:600;text-align:center;display:none}
  .result-message.correct{background:#ecfdf5;color:var(--ok);border:1px solid #d1fae5}
  .result-message.wrong{background:#fef2f2;color:var(--bad);border:1px solid #fecaca}
  @media (max-width:640px){.controls{grid-template-columns:1fr}.answer-buttons{grid-template-columns:1fr}.bottom-controls{grid-template-columns:1fr}.question{font-size:28px}}
</style>
</head>
<body>
<div class="container">
  <div class="header"><h1>ğŸŒŸ ìœ¤ì„±ì´ê°€ ì¢‹ì•„í•˜ëŠ” ë‹¨ì–´ í…ŒìŠ¤íŠ¸! ğŸŒŸ</h1></div>

  <!-- ì‹œì‘ í™”ë©´ -->
  <div class="card" id="startScreen">
    <div class="controls">
      <div class="form-group">
        <label>ë‚ ì§œ ì„ íƒ</label>
        <select id="daySelect">
          <option>Day 7 (8/12)</option><option>Day 8 (8/13)</option><option>Day 9 (8/14)</option>
          <option>Day 10 (8/18)</option><option>Day 11 (8/19)</option><option>Day 12 (8/20)</option>
          <option>Day 13 (8/21)</option><option>Day 14 (8/25)</option><option>Day 15 (8/26)</option>
          <option>Day 16 (8/27)</option><option>Day 17 (8/28)</option><option>Day 18 (8/29)</option>
        </select>
      </div>
      <div class="form-group">
        <label>í…ŒìŠ¤íŠ¸ ëª¨ë“œ</label>
        <select id="modeSelect">
          <option value="eng2kor">ì˜ì–´ â†’ í•œêµ­ì–´ (ëœ» ì“°ê¸°)</option>
          <option value="kor2eng">í•œêµ­ì–´ â†’ ì˜ì–´ (ìŠ¤í ë§)</option>
        </select>
      </div>
    </div>
    <button id="startBtn">ğŸš€ í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°</button>
    <button id="resetBtn" class="secondary" style="margin-top:12px;">ğŸ“ ì§„í–‰ë¥  ì´ˆê¸°í™”</button>
  </div>

  <!-- í€´ì¦ˆ í™”ë©´ -->
  <div class="card quiz-area" id="quizScreen">
    <div class="quiz-info" id="quizInfo">Day ? â€¢ ë¬¸ì œ ?/?</div>
    <div class="question" id="questionText">ë¬¸ì œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div>
    <div class="hint" id="hintText">íŒíŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div>

    <div class="answer-section">
      <input type="text" id="answerInput" class="answer-input" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
      <div class="answer-buttons">
        <button id="checkBtn">âœ“ í™•ì¸</button>
        <button id="speakBtn" class="secondary">ğŸ” ë„¤ì´ë²„ ì‚¬ì „</button>
      </div>
    </div>

    <div id="resultMessage" class="result-message"></div>

    <div class="stats">
      <div class="stat"><div class="stat-label">ì •ë‹µ</div><div class="stat-value" id="correctCount">0</div></div>
      <div class="stat"><div class="stat-label">ì˜¤ë‹µ</div><div class="stat-value" id="wrongCount">0</div></div>
      <div class="stat"><div class="stat-label">ì—°ì†ì •ë‹µ</div><div class="stat-value" id="streakCount">0</div></div>
    </div>

    <div class="bottom-controls">
      <button id="skipBtn" class="secondary">â­ ê±´ë„ˆë›°ê¸°</button>
      <button id="wrongBtn" class="secondary">ğŸ“ ì˜¤ë‹µë…¸íŠ¸</button>
      <button id="nextBtn">â¡ ë‹¤ìŒ ë¬¸ì œ</button>
    </div>
  </div>
</div>

<script>
/* ---------------- ë‹¨ì–´ ë°ì´í„° ---------------- */
const WORDS = {
  "Day 7 (8/12)":[
    {eng:"light a flame", kor:"ë¶ˆì„ ì§€í”¼ë‹¤"},{eng:"arson", kor:"ë°©í™”"},{eng:"on purpose", kor:"ê³ ì˜ë¡œ, ì¼ë¶€ëŸ¬"},
    {eng:"heatwave", kor:"ì—´ê¸°, ì—´ì„ "},{eng:"destroy", kor:"íŒŒê´´í•˜ë‹¤"},{eng:"history", kor:"ì—­ì‚¬"},
    {eng:"eastern", kor:"ë™ìª½ì— ìœ„ì¹˜í•œ"},{eng:"reach", kor:"~ì— ì´ë¥´ë‹¤, ë‹¿ë‹¤"},{eng:"luckily", kor:"ë‹¤í–‰ìŠ¤ëŸ½ê²Œë„"},
    {eng:"accident", kor:"ì‚¬ê³ , ì¬í•´"},{eng:"cigarette", kor:"ë‹´ë°°"},{eng:"car crash", kor:"ìë™ì°¨ ì¶©ëŒì‚¬ê³ "},
    {eng:"knock down", kor:"ë•Œë ¤ ë¶€ìˆ˜ë‹¤"},{eng:"electrical line", kor:"ì „ì„ "},{eng:"spark", kor:"ë¶ˆê½ƒ, ë¶ˆë˜¥, ë¶ˆê½ƒì„ ì¼ìœ¼í‚¤ë‹¤"}
  ],
  "Day 8 (8/13)":[
    {eng:"controlled burn", kor:"í†µì œëœ ì—°ì†Œ"},{eng:"satellite", kor:"(ì¸ê³µ) ìœ„ì„±, ìœ„ì„±(ì¥ì¹˜)"},
    {eng:"put out fires", kor:"ë¶ˆì„ ë„ë‹¤"},{eng:"chemical", kor:"í™”í•™ì˜"},{eng:"equipment", kor:"ì¥ë¹„"},
    {eng:"tower", kor:"íƒ‘, ì†¡ì‹ íƒ‘"},{eng:"look for", kor:"~ì„ ì°¾ë‹¤"},{eng:"call for", kor:"~ì„ í•„ìš”ë¡œ í•˜ë‹¤"},
    {eng:"match", kor:"ì„±ëƒ¥"},{eng:"effect", kor:"ì˜í–¥, ê²°ê³¼, íš¨ê³¼"},{eng:"cost", kor:"ë¹„ìš©, ë¹„ìš©ì´ ë“¤ë‹¤"},
    {eng:"breathe", kor:"í˜¸í¡í•˜ë‹¤, ìˆ¨ì„ ì‰¬ë‹¤"},{eng:"look after", kor:"~ì„ ë³´ì‚´í”¼ë‹¤, ~ì— ì£¼ì˜í•˜ë‹¤"},
    {eng:"expert", kor:"ì „ë¬¸ê°€"},{eng:"prevent", kor:"ë§‰ë‹¤, ì˜ˆë°©í•˜ë‹¤"}
  ],
  "Day 9 (8/14)":[
    {eng:"lighter", kor:"(ë‹´ë°°) ë¼ì´í„°"},{eng:"fire extinguisher", kor:"ì†Œí™”ê¸°"},{eng:"emergency", kor:"ë¹„ìƒ(ì‚¬íƒœ)"},
    {eng:"evacuate", kor:"ëŒ€í”¼ì‹œí‚¤ë‹¤"},{eng:"order", kor:"ëª…ë ¹"},{eng:"ash", kor:"ì¬, ì¿ë”ë¯¸"},
    {eng:"jewelry", kor:"ë³´ì„ë¥˜"},{eng:"envelope", kor:"ë´‰íˆ¬"},{eng:"tore", kor:"(tearì˜ ê³¼ê±°) ì°¢ì—ˆë‹¤"},
    {eng:"invitation", kor:"ì´ˆëŒ€(ì´ˆì²­)ì¥"},{eng:"a grand ball", kor:"ì„±ëŒ€í•œ ë¬´ë„íšŒ"},{eng:"palace", kor:"ê¶ì „, ì™•ì‹¤"},
    {eng:"instead of", kor:"~ëŒ€ì‹ ì—"},{eng:"opportunity", kor:"ê¸°íšŒ"},{eng:"irritated", kor:"ì§œì¦ì´ ë‚œ, í™”ë‚œ"}
  ],
  "Day 10 (8/18)":[
    {eng:"glance", kor:"í˜ê¹ƒë³´ë‹¤, í˜ë— ë´„"},{eng:"impatiently", kor:"ì¡°ë§ˆì¡°ë§ˆí•˜ê²Œ, ì¡°ê¸‰í•˜ê²Œ"},
    {eng:"stammer", kor:"ë§ì„ ë”ë“¬ë‹¤, ë§ë”ë“¬ê¸°"},{eng:"calm", kor:"ì¹¨ì°©í•œ, ì°¨ë¶„í•œ"},{eng:"voice", kor:"ëª©ì†Œë¦¬"},
    {eng:"franc", kor:"í”„ë‘ (í™”íë‹¨ìœ„)"},{eng:"grow pale", kor:"íŒŒë—ê²Œ ì§ˆë¦¬ë‹¤"},{eng:"savings", kor:"ì €ì¶•"},
    {eng:"anxious", kor:"ë¶ˆì•ˆí•´í•˜ëŠ”"},{eng:"annoy", kor:"ì§œì¦ë‚˜ê²Œí•˜ë‹¤"},{eng:"stylish", kor:"ìœ í–‰ì„ ë”°ë¥´ëŠ”, ë©‹ì§„, ìš°ì•„í•œ"},
    {eng:"humiliating", kor:"êµ´ìš•ìŠ¤ëŸ¬ìš´"},{eng:"lend", kor:"ë¹Œë ¤ì£¼ë‹¤"},{eng:"wardrobe", kor:"ì˜·ì¥"},
    {eng:"Certainly", kor:"ê·¸ëŸ¼ìš”, ë¬¼ë¡ ì´ì§€ìš”"}
  ],
  "Day 11 (8/19)":[
    {eng:"present", kor:"ì°¸ì„í•œ"},{eng:"feel a sense of joy", kor:"í¬ì—´ê°ì„ ëŠë¼ë‹¤"},
    {eng:"elegant", kor:"ìš°ì•„í•œ, í’ˆê²©ìˆëŠ”"},{eng:"midnight", kor:"ìì •, í•œë°¤ì¤‘"},
    {eng:"contrast", kor:"ëŒ€ì¡°í•˜ë‹¤, ëŒ€ì¡°"},{eng:"catch a cold", kor:"ê°ê¸° ë“¤ë‹¤"},{eng:"cab", kor:"íƒì‹œ"},
    {eng:"despair", kor:"ì ˆë§, ì ˆë§í•˜ë‹¤"},{eng:"whole", kor:"ì „ì²´ì˜"},{eng:"route", kor:"ê¸¸, ë…¸ì„ "},
    {eng:"completely", kor:"ì™„ì „íˆ"},{eng:"overwhelmed", kor:"ì••ë„ëœ"},{eng:"reward", kor:"ë³´ìƒ, ë³´ìƒí•˜ë‹¤"},
    {eng:"fear", kor:"ë‘ë ¤ì›€, ê³µí¬"},{eng:"hollow", kor:"(ì†ì´) ë¹ˆ"}
  ],
  "Day 12 (8/20)":[
    {eng:"clasp", kor:"(ê½‰) ì›€ì¼œì¥ë‹¤, (ê½‰) ê»´ì•ˆë‹¤"},{eng:"mend", kor:"ìˆ˜ë¦¬í•˜ë‹¤, ê³ ì¹˜ë‹¤"},
    {eng:"make a plan", kor:"ê³„íšì„ ì§œë‹¤"},{eng:"lose hope", kor:"ì‹¤ë§í•˜ë‹¤"},{eng:"possess", kor:"ì†Œìœ í•˜ë‹¤, ì§€ë‹ˆë‹¤"},
    {eng:"borrow", kor:"ë¹Œë¦¬ë‹¤"},{eng:"collect", kor:"ëª¨ìœ¼ë‹¤"},{eng:"frightened", kor:"ê²ë¨¹ì€, ë¬´ì„œì›Œí•˜ëŠ”"},
    {eng:"whenever", kor:"~í•  ë•ŒëŠ” ì–¸ì œë“ ì§€, ~í•  ë•Œë§ˆë‹¤"},{eng:"from then on", kor:"ê·¸ë•Œë¶€í„°"},
    {eng:"detect", kor:"ë°œê²¬í•˜ë‹¤, ê°ì§€í•˜ë‹¤"},{eng:"substitution", kor:"ëŒ€ì²´"},{eng:"thief", kor:"ë„ë‘‘"},
    {eng:"tough", kor:"í˜ë“ , ì–´ë ¤ìš´"},{eng:"complain", kor:"ë¶ˆí‰í•˜ë‹¤"}
  ],
  "Day 13 (8/21)":[
    {eng:"accept", kor:"ë°›ì•„ë“¤ì´ë‹¤"},{eng:"dreadful", kor:"ë”ì°í•œ, ì§€ë…í•œ"},{eng:"debt", kor:"ë¹š, ë¶€ì±„"},
    {eng:"dainty", kor:"ì•™ì¦ë§ì€, ì¡°ì‹¬ìŠ¤ëŸ¬ìš´"},{eng:"bargain", kor:"ì‹¸ê²Œ ì‚¬ëŠ” ë¬¼ê±´, í˜‘ì˜, í¥ì •"},
    {eng:"absolutely", kor:"í‹€ë¦¼ì—†ì´"},{eng:"interest", kor:"ì´ì"},{eng:"admire", kor:"ì¡´ê²½í•˜ë‹¤, ì¹­ì°¬í•˜ë‹¤"},
    {eng:"strange", kor:"ì´ìƒí•œ, ë‚¯ì„ "},{eng:"refresh", kor:"ìƒê¸°ë¥¼ ë˜ì°¾ê²Œí•˜ë‹¤"},{eng:"charming", kor:"ë§¤ë ¥ì ì¸, ë©‹ì§„"},
    {eng:"astonish", kor:"ê¹œì§ ë†€ë¼ê²Œ í•˜ë‹¤"},{eng:"greet", kor:"í™˜ì˜í•˜ë‹¤"},{eng:"utter", kor:"(ë§ì„) í•˜ë‹¤"},
    {eng:"poverty", kor:"ê°€ë‚œ"}
  ],
  "Day 14 (8/25)":[
    {eng:"outbreak", kor:"ë°œìƒ, ë°œë°œ"},{eng:"pandemic", kor:"ì „êµ­(ì „ ì„¸ê³„ì ì¸) ìœ í–‰ë³‘"},
    {eng:"be ill", kor:"ëª¸ì´ í¸ì¹˜ ì•Šë‹¤"},{eng:"at the same time", kor:"ê·¸ì™€ ë™ì‹œì—"},
    {eng:"illness", kor:"ë³‘, ì•„í””"},{eng:"from person to person", kor:"ì‚¬ëŒì—ì„œ ì‚¬ëŒìœ¼ë¡œ"},
    {eng:"serious", kor:"ì‹¬ê°í•œ"},{eng:"break out", kor:"ë°œìƒí•˜ë‹¤, ë°œë°œí•˜ë‹¤"},{eng:"affect", kor:"ì˜í–¥ì„ ë¯¸ì¹˜ë‹¤"},
    {eng:"tiny", kor:"ì•„ì£¼ ì‘ì€"},{eng:"organism", kor:"ìœ ê¸°ì²´, (ê·¹ë„ë¡œ ì‘ì€) ìƒë¬¼ì²´"},
    {eng:"microscope", kor:"í˜„ë¯¸ê²½"},{eng:"bacteria", kor:"ë°•í…Œë¦¬ì•„, ì„¸ê· "},
    {eng:"are made of", kor:"~ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ë‹¤"},{eng:"cell", kor:"ì„¸í¬"}
  ],
  "Day 15 (8/26)":[
    {eng:"digest", kor:"ì†Œí™”í•˜ë‹¤"},{eng:"infection", kor:"ê°ì—¼"},{eng:"enter", kor:"ë“¤ì–´ê°€ë‹¤"},
    {eng:"stick to", kor:"~ì— ë‹¬ë¼ë¶™ë‹¤, ê³ ìˆ˜í•˜ë‹¤"},{eng:"copy", kor:"ë³µì‚¬, ë³µì‚¬í•˜ë‹¤"},
    {eng:"virus", kor:"ë°”ì´ëŸ¬ìŠ¤"},{eng:"common", kor:"í”í•œ"},{eng:"the flu", kor:"ë…ê°"},
    {eng:"human", kor:"ì¸ê°„"},{eng:"dangerous", kor:"ìœ„í—˜í•œ"},{eng:"develop", kor:"ì„±ì¥í•˜ë‹¤, ë°œì „í•˜ë‹¤"},
    {eng:"Europe", kor:"ìœ ëŸ½"},{eng:"everywhere", kor:"ëª¨ë“  ê³³, ì–´ë””ë‚˜"},{eng:"Plague", kor:"ì „ì—¼ë³‘"},
    {eng:"European", kor:"ìœ ëŸ½ì˜"}
  ],
  "Day 16 (8/27)":[
    {eng:"continue", kor:"ê³„ì†í•˜ë‹¤"},{eng:"flea", kor:"ë²¼ë£©"},{eng:"rat", kor:"ì¥"},
    {eng:"carry", kor:"(ë³‘ì„) ì˜®ê¸°ë‹¤"},{eng:"was filled with", kor:"~ìœ¼ë¡œ ê°€ë“ì°¼ë‹¤"},
    {eng:"herb", kor:"í—ˆë¸Œ, ì•½ì´ˆ"},{eng:"ability", kor:"ëŠ¥ë ¥"},{eng:"infectious", kor:"ì „ì—¼ë˜ëŠ”"},
    {eng:"sneezing", kor:"ì¬ì±„ê¸°"},{eng:"door handle", kor:"ì†ì¡ì´"},{eng:"type", kor:"ìœ í˜•"},
    {eng:"cough", kor:"ê¸°ì¹¨í•˜ë‹¤, ê¸°ì¹¨"},{eng:"anymore", kor:"ë”ì´ìƒ"},{eng:"create", kor:"ì°½ì¡°í•˜ë‹¤"},
    {eng:"vaccine", kor:"ë°±ì‹ "}
  ],
  "Day 17 (8/28)":[
    {eng:"medicine", kor:"ì•½, ì˜ì•½"},{eng:"less", kor:"ëœ"},{eng:"healthy", kor:"ê±´ê°•í•œ"},
    {eng:"exercise", kor:"ìš´ë™í•˜ë‹¤"},{eng:"simple", kor:"ê°„ë‹¨í•œ, ë‹¨ìˆœí•œ"},{eng:"step", kor:"ë‹¨ê³„"},
    {eng:"protect", kor:"ë³´í˜¸í•˜ë‹¤"},{eng:"cover", kor:"ë®ë‹¤, ê°€ë¦¬ë‹¤"},{eng:"keep a distance", kor:"ê±°ë¦¬ë¥¼ ìœ ì§€í•˜ë‹¤"},
    {eng:"follow", kor:"ë”°ë¥´ë‹¤"},{eng:"direction", kor:"ì§€ì‹œ"},{eng:"make sure", kor:"í™•ì‹¤í•˜ê²Œ í•˜ë‹¤"},
    {eng:"on average", kor:"í‰ê· ì ìœ¼ë¡œ"},{eng:"on stage", kor:"ë¬´ëŒ€ì—ì„œ"},{eng:"stream", kor:"ìŠ¤íŠ¸ë¦¬ë°í•˜ë‹¤"}
  ],
  "Day 18 (8/29)":[
    {eng:"dance to music", kor:"ìŒì•…ì— ë§ì¶° ì¶¤ì¶”ë‹¤"},{eng:"attend", kor:"ì°¸ì„í•˜ë‹¤"},
    {eng:"write lyrics", kor:"ê°€ì‚¬ë¥¼ ì“°ë‹¤"},{eng:"held", kor:"(ì¶•ì œë¥¼) ì—´ì—ˆë‹¤"},
    {eng:"music competition", kor:"ìŒì•…ê²½ì—°ëŒ€íšŒ"},{eng:"fantastic", kor:"ì—„ì²­ë‚œ, êµ‰ì¥í•œ"},
    {eng:"senior", kor:"ë‚˜ì´ ë“  ì‚¬ëŒ, ë…¸ì¸"},{eng:"unity", kor:"í†µí•©, ì¼ì¹˜"},
    {eng:"convince", kor:"ë‚©ë“ì‹œí‚¤ë‹¤"},{eng:"nothing", kor:"ì•„ë¬´ê²ƒë„ (ì•„ë‹ˆë‹¤)"},
    {eng:"beat", kor:"ì´ê¸°ë‹¤"},{eng:"get a chance", kor:"ê¸°íšŒë¥¼ ì–»ë‹¤"},{eng:"regret", kor:"í›„íšŒí•˜ë‹¤"},
    {eng:"hit a home run", kor:"í™ˆëŸ°ì„ ì¹˜ë‹¤"},{eng:"commit", kor:"ì €ì§€ë¥´ë‹¤, ë²”í•˜ë‹¤"}
  ]
};

/* ------------- ìƒíƒœ/ìš”ì†Œ ------------- */
let currentQuiz=[], currentIndex=0, correctCount=0, wrongCount=0, streakCount=0, isAnswered=false;
const startScreen=document.getElementById('startScreen'), quizScreen=document.getElementById('quizScreen');
const daySelect=document.getElementById('daySelect'), modeSelect=document.getElementById('modeSelect');
const startBtn=document.getElementById('startBtn'), resetBtn=document.getElementById('resetBtn');
const quizInfo=document.getElementById('quizInfo'), questionText=document.getElementById('questionText'), hintText=document.getElementById('hintText');
const answerInput=document.getElementById('answerInput'), checkBtn=document.getElementById('checkBtn'), speakBtn=document.getElementById('speakBtn');
const resultMessage=document.getElementById('resultMessage');
const correctCountEl=document.getElementById('correctCount'), wrongCountEl=document.getElementById('wrongCount'), streakCountEl=document.getElementById('streakCount');

/* ------------- ìœ í‹¸/ì €ì¥ ------------- */
function normalize(s){return s.toLowerCase().replace(/[()]/g,' ').replace(/\s+/g,' ').replace(/\s*,\s*/g,',').trim()}
function korParts(s){return s.split(/[,Â·/]| ë˜ëŠ” /g).map(t=>t.trim()).filter(Boolean)}
function showResult(msg,good){resultMessage.textContent=msg; resultMessage.className='result-message '+(good?'correct':'wrong'); resultMessage.style.display='block'; setTimeout(()=>resultMessage.style.display='none',2500)}
function saveProgress(day,eng,ok){
  const k='yoonsung_vocab_progress'; let p={}; try{p=JSON.parse(localStorage.getItem(k)||'{}')}catch{}
  p[day]??={done:[],wrong:[]};
  if(ok){ if(!p[day].done.includes(eng)) p[day].done.push(eng); p[day].wrong=p[day].wrong.filter(x=>x!==eng); }
  else { if(!p[day].wrong.includes(eng)) p[day].wrong.push(eng); }
  localStorage.setItem(k, JSON.stringify(p));
}
function loadProgress(){ try{return JSON.parse(localStorage.getItem('yoonsung_vocab_progress')||'{}')}catch{return{}} }

/* ------------- ë„¤ì´ë²„ ì‚¬ì „ ì—´ê¸° ------------- */
function openNaverDict(query){
  const url = `https://en.dict.naver.com/#/search?query=${encodeURIComponent(query)}`;
  window.open(url, '_blank', 'noopener'); // ìƒˆ íƒ­ì—ì„œ ì—´ê¸° (ëª¨ë°”ì¼ë„ ë™ì‘)
}

/* ------------- í€´ì¦ˆ ë¡œì§ ------------- */
function startQuiz(){
  const d=daySelect.value;
  currentQuiz=[...WORDS[d]];
  currentIndex=0; correctCount=0; wrongCount=0; streakCount=0; isAnswered=false;
  updateStats();
  startScreen.style.display='none';
  quizScreen.classList.add('active');
  showQuestion();
}
function showQuestion(){
  if(currentIndex>=currentQuiz.length) return finishQuiz();
  const mode=modeSelect.value, item=currentQuiz[currentIndex];
  quizInfo.textContent=`${daySelect.value} â€¢ ë¬¸ì œ ${currentIndex+1}/${currentQuiz.length}`;
  if(mode==='eng2kor'){
    questionText.textContent=item.eng;
    hintText.textContent='í•œêµ­ì–´ ëœ»ì„ ì…ë ¥í•˜ì„¸ìš” (ì—¬ëŸ¬ ëœ» ì¤‘ í•˜ë‚˜ë§Œ ì¨ë„ ì •ë‹µ)';
    speakBtn.disabled=false; // ë„¤ì´ë²„ ì‚¬ì „ ì—´ê¸° ê°€ëŠ¥
  }else{
    questionText.textContent=item.kor;
    hintText.textContent='ì˜ì–´ ë‹¨ì–´/êµ¬ë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”';
    speakBtn.disabled=false; // í•œâ†’ì˜ ëª¨ë“œì—ì„œë„ ì •ë‹µ ë‹¨ì–´ì˜ ì‚¬ì „ ì—´ ìˆ˜ ìˆê²Œ í—ˆìš©
  }
  isAnswered=false; answerInput.value=''; answerInput.focus(); resultMessage.style.display='none';
}
function checkAnswer(){
  if(isAnswered) return;
  const mode=modeSelect.value, d=daySelect.value, item=currentQuiz[currentIndex];
  const user=normalize(answerInput.value.trim()); if(!user){alert('ë‹µì„ ì…ë ¥í•´ì£¼ì„¸ìš”!'); return;}
  let ok=false;
  if(mode==='eng2kor'){
    const parts=korParts(item.kor).map(normalize);
    ok = parts.some(p=>p===user || (p.length>2 && user.length>2 && (p.includes(user)||user.includes(p))));
  }else{
    ok = user===normalize(item.eng);
  }
  isAnswered=true;
  if(ok){correctCount++; streakCount++; showResult('ğŸ‰ ì •ë‹µì…ë‹ˆë‹¤!', true); saveProgress(d,item.eng,true);}
  else {wrongCount++; streakCount=0; showResult(`âŒ ì •ë‹µ: ${mode==='eng2kor'?item.kor:item.eng}`, false); saveProgress(d,item.eng,false);}
  updateStats();
}
function nextQuestion(){ currentIndex++; showQuestion(); }
function skipQuestion(){ currentIndex++; showQuestion(); }
function showWrongAnswers(){
  const d=daySelect.value, p=loadProgress(), wrong=(p[d]?.wrong)||[];
  if(!wrong.length){alert('ì˜¤ë‹µì´ ì—†ìŠµë‹ˆë‹¤! ğŸ‰'); return;}
  currentQuiz = WORDS[d].filter(x=>wrong.includes(x.eng));
  currentIndex=0; correctCount=0; wrongCount=0; streakCount=0;
  updateStats(); showQuestion();
}
function finishQuiz(){
  const acc=currentQuiz.length?Math.round((correctCount/currentQuiz.length)*100):0;
  alert(`ğŸŠ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!\nì •ë‹µ: ${correctCount}ê°œ\nì˜¤ë‹µ: ${wrongCount}ê°œ\nì •ë‹µë¥ : ${acc}%`);
  quizScreen.classList.remove('active'); startScreen.style.display='block';
}
function resetProgress(){
  if(confirm('ì €ì¥ëœ ëª¨ë“  ì§„í–‰ë¥ ê³¼ ì˜¤ë‹µë…¸íŠ¸ë¥¼ ì‚­ì œí• ê¹Œìš”?')){
    localStorage.removeItem('yoonsung_vocab_progress'); alert('ì´ˆê¸°í™” ì™„ë£Œ!');
  }
}
function updateStats(){correctCountEl.textContent=correctCount; wrongCountEl.textContent=wrongCount; streakCountEl.textContent=streakCount}

/* ------------- ì´ë²¤íŠ¸ ------------- */
startBtn.addEventListener('click', startQuiz);
resetBtn.addEventListener('click', resetProgress);
checkBtn.addEventListener('click', checkAnswer);
nextBtn.addEventListener('click', nextQuestion);
skipBtn.addEventListener('click', skipQuestion);
wrongBtn.addEventListener('click', showWrongAnswers);

// ë„¤ì´ë²„ ì‚¬ì „ ë²„íŠ¼: í•­ìƒ í˜„ì¬ ë¬¸ì œì˜ "ì˜ì–´ ì •ë‹µ"ìœ¼ë¡œ ê²€ìƒ‰
speakBtn.addEventListener('click', ()=>{
  if(currentIndex>=currentQuiz.length) return;
  const item=currentQuiz[currentIndex];
  openNaverDict(item.eng);
});

// Enter í‚¤ë¡œ ì œì¶œ/ë‹¤ìŒ
answerInput.addEventListener('keydown', e=>{
  if(e.key==='Enter'){ if(!isAnswered) checkAnswer(); else nextQuestion(); }
});

// ì´ˆê¸° í¬ì»¤ìŠ¤
document.addEventListener('DOMContentLoaded', ()=>daySelect.focus());
</script>
</body>
</html>
